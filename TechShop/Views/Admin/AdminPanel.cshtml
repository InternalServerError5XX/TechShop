@using TechShop.Domain.DTOs.AdminDto
@model ResponseAdminDto

@{
    ViewData["Title"] = "Admin Panel";
    <script src="~/js/admin.js" asp-append-version="true"></script>
}

<div class="container mt-4">
    <h2>Admin Panel</h2>
    <hr />

    <nav class="mb-3">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link" id="nav-users-tab" data-bs-toggle="tab" href="#nav-users" role="tab" aria-controls="nav-users" aria-selected="true">Users</a>
            <a class="nav-item nav-link" id="nav-roles-tab" data-bs-toggle="tab" href="#nav-roles" role="tab" aria-controls="nav-roles" aria-selected="false">Roles</a>
            <a class="nav-item nav-link" id="nav-products-tab" data-bs-toggle="tab" href="#nav-products" role="tab" aria-controls="nav-products" aria-selected="false">Products</a>
            <a class="nav-item nav-link" id="nav-categories-tab" data-bs-toggle="tab" href="#nav-categories" role="tab" aria-controls="nav-categories" aria-selected="false">Categories</a>
            <a class="nav-item nav-link" id="nav-orders-tab" data-bs-toggle="tab" href="#nav-orders" role="tab" aria-controls="nav-orders" aria-selected="false">Orders</a>
            <a class="nav-item nav-link" id="nav-stats-tab" data-bs-toggle="tab" href="#nav-stats" role="tab" aria-controls="nav-stats" aria-selected="false">Statistics</a>
            <a id="add-new-button" class="btn btn-success btn-sm ms-auto d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square me-2" viewBox="0 0 16 16">
                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                </svg>
                Add new
            </a>
        </div>
    </nav>

    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-users" role="tabpanel" aria-labelledby="nav-users-tab">
            <!-- Users Table -->
        </div>
        <div class="tab-pane fade" id="nav-roles" role="tabpanel" aria-labelledby="nav-roles-tab">
            <!-- Roles Table -->
        </div>
        <div class="tab-pane fade" id="nav-products" role="tabpanel" aria-labelledby="nav-products-tab">
            <!-- Products Table -->
        </div>        
        <div class="tab-pane fade" id="nav-categories" role="tabpanel" aria-labelledby="nav-categories-tab">
            <!-- Categories Table -->
        </div>
        <div class="tab-pane fade" id="nav-orders" role="tabpanel" aria-labelledby="nav-orders-tab">
            <!-- Orders Table -->
        </div>
        <div class="tab-pane fade" id="nav-stats" role="tabpanel" aria-labelledby="nav-stats-tab">
            <!-- stats Table -->
        </div>
    </div>
</div>

<div class="modal fade" id="addCategoryModal" tabindex="-1" role="dialog" aria-labelledby="addCategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addCategoryModalLabel">Add New Category</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="categoryModalBody"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary d-flex align-items-center" id="saveCategoryButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="getCategoryModal" tabindex="-1" role="dialog" aria-labelledby="getCategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="getCategoryModalLabel">Edit Category</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="getCategoryModalBody"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary d-flex align-items-center" id="_saveCategoryButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addRoleModal" tabindex="-1" role="dialog" aria-labelledby="addRoleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addRoleModalLabel">Add New Role</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="addRoleModalBody"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary d-flex align-items-center" id="saveRoleButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="updateRoleModal" tabindex="-1" role="dialog" aria-labelledby="updateRoleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateRoleModalLabel">Edit Role</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="updateRoleModalBody"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary d-flex align-items-center" id="_saveRoleButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addUserModal" tabindex="-1" role="dialog" aria-labelledby="addUserModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addUserModalLabel">Add User</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="addUserModalBody"></div>
            <div class="modal-footer">
                <button type="button" id="_saveUserButton" class="btn btn-primary d-flex align-items-center" data-dismiss="modal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="updateUserModal" tabindex="-1" role="dialog" aria-labelledby="updateUserModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateUserModalLabel">Update User</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="updateUserModalBody"></div>
            <div class="modal-footer">
                <button type="button" id="saveUpdatedUserButton" class="btn btn-primary d-flex align-items-center" data-dismiss="modal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-floppy me-2" viewBox="0 0 16 16">
                        <path d="M11 2H9v3h2z" />
                        <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                    </svg>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const navTabs = document.querySelectorAll('#nav-tab a');
        const addNewButton = document.getElementById('add-new-button');
        const activeTabId = localStorage.getItem('activeTab');

        if (activeTabId) {
            const activeTab = document.getElementById(activeTabId);
            if (activeTab) {
                const bootstrapTab = new bootstrap.Tab(activeTab);
                bootstrapTab.show();
                updateAddNewButton(activeTabId);
            }
        } else {
            loadTabContent('nav-products-tab');
            updateAddNewButton('nav-products-tab');
        }

        navTabs.forEach(tab => {
            tab.addEventListener('shown.bs.tab', function (event) {
                const tabId = event.target.id;
                localStorage.setItem('activeTab', tabId);
                loadTabContent(tabId);
                updateAddNewButton(tabId);
            });
        });

        addNewButton.addEventListener('click', function () {
            const currentActiveTab = document.querySelector('#nav-tab .active');
            const tabId = currentActiveTab.id;
            switch (tabId) {
                case 'nav-users-tab':
                    loadUserModal();
                    break;
                case 'nav-roles-tab':
                    loadRoleModal();
                    break;
                case 'nav-products-tab':
                    window.location.href = '@Url.Action("Create", "Product")';
                    break;               
                case 'nav-categories-tab':
                    loadCategoryModal();
                    break;
                default:
                    break;
            }
        });

        function loadTabContent(tabId) {
            let url;
            switch (tabId) {
                case 'nav-users-tab':
                    url = '@Url.Action("GetUsersAdminPanel")';
                    break;
                case 'nav-roles-tab':
                    url = '@Url.Action("GetRolesAdminPanel")';
                    break;
                case 'nav-products-tab':
                    url = '@Url.Action("GetProductsAdminPanel")';
                    break;                
                case 'nav-categories-tab':
                    url = '@Url.Action("GetCategoriesAdminPanel")';
                    break;
                case 'nav-orders-tab':
                    url = '@Url.Action("GetOrdersAdminPanel")';
                    break;
                case 'nav-stats-tab':
                    url = '@Url.Action("GetStatsAdminPanel")';
                    break;
                default:
                    return;
            }

            const tabContent = document.querySelector(`#${tabId.replace('-tab', '')}`);
            fetch(url)
                .then(response => response.text())
                .then(html => {
                    tabContent.innerHTML = html;
                })
                .catch(error => console.error('Error loading tab content:', error));
        }

        function updateAddNewButton(tabId) {
            switch (tabId) {
                case 'nav-users-tab':
                    addNewButton.classList.remove('disabled');
                    addNewButton.removeAttribute('href');
                    addNewButton.setAttribute('data-bs-target', '#addUserModal');
                    addNewButton.setAttribute('data-bs-toggle', 'modal');
                    break;
                case 'nav-roles-tab':
                    addNewButton.classList.remove('disabled');
                    addNewButton.removeAttribute('href');
                    addNewButton.setAttribute('data-bs-target', '#addRoleModal');
                    addNewButton.setAttribute('data-bs-toggle', 'modal');
                    break;
                case 'nav-products-tab':
                    addNewButton.classList.remove('disabled');
                    addNewButton.setAttribute('href', '@Url.Action("Create", "Product")');
                    break;
                case 'nav-categories-tab':
                    addNewButton.classList.remove('disabled');
                    addNewButton.removeAttribute('href');
                    addNewButton.setAttribute('data-bs-target', '#addCategoryModal');
                    addNewButton.setAttribute('data-bs-toggle', 'modal');
                    break;
                case 'nav-orders-tab':
                    addNewButton.classList.add('disabled');
                    break;
                case 'nav-stats-tab':
                    addNewButton.classList.add('disabled');
                    break;
                default:
                    addNewButton.removeAttribute('href');
                    break;
            }
        }
    });
</script>

<script>
    function loadCategoryModal() {
        $.ajax({
            url: '@Url.Action("CreateCategory", "Product")',
            type: 'GET',
            success: function (result) {
                $('#categoryModalBody').html(result);
                $('#addCategoryModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    }

    $(document).ready(function () {
        $('#saveCategoryButton').click(function () {
            var formData = $('#addCategoryForm').serialize();
            $.ajax({
                url: '@Url.Action("CreateCategory", "Product")',
                type: 'POST',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#addCategoryModal').modal('hide');
                        location.reload();
                    } else {
                        $('#categoryModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

<script>
    $(document).on('click', '.getCategoryButton', function (e) {
        e.preventDefault();
        var id = $(this).data('id');
        $.ajax({
            url: '@Url.Action("GetCategory", "Product")',
            type: 'GET',
            data: { id: id },
            success: function (result) {
                $('#getCategoryModalBody').html(result);
                $('#getCategoryModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    });

    $(document).ready(function () {
        $('#_saveCategoryButton').click(function () {
            var formData = $('#getCategoryForm').serialize();
            $.ajax({
                url: '@Url.Action("UpdateCategory", "Product")',
                type: 'POST',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#getCategoryModal').modal('hide');
                        location.reload();
                    } else {
                        $('#getCategoryModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

<script>
    function loadRoleModal() {
        $.ajax({
            url: '@Url.Action("Create", "Role")',
            type: 'GET',
            success: function (result) {
                $('#addRoleModalBody').html(result);
                $('#addRoleModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    }

    $(document).ready(function () {
        $('#saveRoleButton').click(function () {
            var formData = $('#addRoleForm').serialize();
            $.ajax({
                url: '@Url.Action("Create", "Role")',
                type: 'POST',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#addRoleModal').modal('hide');
                        location.reload();
                    } else {
                        $('#addRoleModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

<script>
    $(document).on('click', '.getRoleButton', function (e) {
        e.preventDefault();
        var id = $(this).data('role-id');
        $.ajax({
            url: '@Url.Action("Update", "Role")',
            type: 'GET',
            data: { id: id },
            success: function (result) {
                $('#updateRoleModalBody').html(result);
                $('#updateRoleModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    });

    $(document).ready(function () {
        $('#_saveRoleButton').click(function () {
            var formData = $('#addRoleForm').serialize();
            $.ajax({
                url: '@Url.Action("Update", "Role")',
                type: 'PATCH',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#updateRoleModal').modal('hide');
                        location.reload();
                    } else {
                        $('#updateRoleModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

<script>
    function loadUserModal() {
        $.ajax({
            url: '@Url.Action("Create", "User")',
            type: 'GET',
            success: function (result) {
                $('#addUserModalBody').html(result);
                $('#addUserModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    }

    $(document).ready(function () {
        $('#_saveUserButton').click(function () {
            var formData = $('#addUserForm').serialize();
            $.ajax({
                url: '@Url.Action("Create", "User")',
                type: 'POST',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#addUserModal').modal('hide');
                        location.reload();
                    } else {
                        $('#addUserModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });

    $(document).on('click', '.getProfileButton', function (e) {
        e.preventDefault();
        var userId = $(this).data('user-id');
        $.ajax({
            url: '@Url.Action("UpdateUser", "User")',
            type: 'GET',
            data: { userId: userId },
            success: function (result) {
                $('#updateUserModalBody').html(result);
                $('#updateUserModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    });

    $(document).ready(function () {
        $('#saveUpdatedUserButton').click(function () {
            var formData = $('#updateUserForm').serialize();
            $.ajax({
                url: '@Url.Action("UpdateUser", "User")',
                type: 'PATCH',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        $('#updateUserForm').modal('hide');
                        location.reload();
                    } else {
                        $('#updateUserModalBody').html(response);
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

<script>
    closeUserModal();
    closeUpdateUserModal();
    closeCategoryModal();
    closeGetCategoryModal();
    closeAddRoleModal();
</script>